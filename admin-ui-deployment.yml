---
name: admin-ui

director_uuid: (( param "specify director uuid" ))

releases:
- name: admin-ui
  version: latest

update: (( param "specify update" ))

stemcells:
- alias: default
  name: bosh-aws-xen-hvm-ubuntu-trusty-go_agent
  version: latest

instance_groups:
- name: admin-ui
  instances: 1
  azs: [z1]
  networks:
  - name: admin-ui
  vm_type: admin-ui
  persistent_disk_type: admin-ui
  stemcell: default
  jobs:
  - name: admin_ui
    release: admin-ui
    properties:
      admin_ui:
        cloud_controller_uri: (( param "specify cloud_controller_uri" ))
        cloud_controller_ssl_verify_none: false
        uri: (( param "specify admin-ui uri" ))
        uaa:
          client:
            id: admin-ui
            secret: (( param "specify uaa client secret" ))
          scopes:
            admin: ~
            user: ~
        ccdb:
          scheme: (( grab terraform_outputs.cf_rds_engine ))
          address: (( grab terraform_outputs.cf_rds_host ))
          port: (( grab terraform_outputs.cf_rds_port ))
          username: (( grab terraform_outputs.cf_rds_username ))
          password: (( grab terraform_outputs.cf_rds_password ))
          database: ccdb
        uaadb:
          scheme: (( grab terraform_outputs.cf_rds_engine ))
          address: (( grab terraform_outputs.cf_rds_host ))
          port: (( grab terraform_outputs.cf_rds_port ))
          username: (( grab terraform_outputs.cf_rds_username ))
          password: (( grab terraform_outputs.cf_rds_password ))
          database: uaadb
      networks:
        apps: (( param "specify apps network" ))
      nats:
        user: (( param "specify nats user" ))
        password: (( param "specify nats password" ))
        port: (( param "specify nats port" ))
        machines: (( param "specify nats machines" ))
        address: (( grab machines.[0] ))
